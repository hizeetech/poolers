{% extends "admin/base_site.html" %}
{% load i18n l10n admin_urls %}

{% block content %}
<div class="content-main">
    <h1>Confirm Impersonation</h1>
    
    <div class="module">
        <p>You are about to impersonate the following user:</p>
        <ul>
            {% for user in users %}
            <li><strong>{{ user.email }}</strong> ({{ user.get_user_type_display }})</li>
            {% endfor %}
        </ul>
        
        <div class="alert alert-warning" style="background-color: #fff3cd; color: #856404; padding: 15px; border: 1px solid #ffeeba; border-radius: 5px; margin-bottom: 20px;">
            <strong>Warning:</strong>
            <ul>
                <li>This action will be logged in the system audit trail.</li>
                <li>You will have the same permissions as this user.</li>
                <li>Do not perform actions that would violate compliance policies.</li>
            </ul>
        </div>
        
        <form action="" method="post">
            {% csrf_token %}
            {% for user in users %}
            <input type="hidden" name="_selected_action" value="{{ user.pk }}" />
            {% endfor %}
            <input type="hidden" name="action" value="impersonate_user_action" />
            <input type="hidden" name="confirmed" value="yes" />
            
            <div class="submit-row">
                <input type="submit" value="Yes, I understand. Proceed to Login" class="default" />
                <a href="#" onclick="window.history.back(); return false;" class="button" style="margin-left: 10px;">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
